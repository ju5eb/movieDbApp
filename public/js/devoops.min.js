"use strict";function LoadAjaxContent(e,t,a){t="undefined"!=typeof t?t:"#ajax-content",a="undefined"!=typeof a?a:".preloader",$(a).show(),$.ajax({mimeType:"text/html; charset=utf-8",url:e,type:"GET",success:function(e){$(t).html(e)},error:function(e,t,a){alert(a)},dataType:"html",async:!1}),CreateDataTable(),$("#searchActorsButton").on("click",function(){LoadData("person")}),$("#searchMoviesButton").on("click",function(){LoadData("movie")}),$(a).hide()}function SetMinBlockHeight(e){e.css("min-height",window.innerHeight-50)}function OpenModalBox(e,t,a){var i=$("#modalbox");i.find(".modal-header-name span").html(e),i.find(".devoops-modal-inner").html(t),i.find(".devoops-modal-bottom").html(a),i.fadeIn("fast"),$("body").addClass("body-expanded")}function CloseModalBox(){var e=$("#modalbox");e.fadeOut("fast",function(){e.find(".modal-header-name span").children().remove(),e.find(".devoops-modal-inner").children().remove(),e.find(".devoops-modal-bottom").children().remove(),$("body").removeClass("body-expanded")})}function CreateDataTable(){$("#datatable-1").dataTable({aaSorting:[[3,"desc"]],sDom:"<'box-content'<'col-sm-6'><'col-sm-6 text-right'l><'clearfix'>>rt<'box-content'<'col-sm-6'i><'col-sm-6 text-right'p><'clearfix'>>",sPaginationType:"bootstrap",oLanguage:{sSearch:"",sLengthMenu:"_MENU_"}})}function FillDataTable(e){var t=$("#datatable-1").dataTable();t.fnClearTable(),t.fnAddData(e),t.fnDraw(),$(".loadingDiv").hide()}function FillDataTable(e){var t=$("#datatable-1").dataTable();t.fnClearTable(),t.fnAddData(e),t.fnDraw(),$(".loadingDiv").hide()}function LoadApiData(e,t){var a="http://api.themoviedb.org/3/",i="352dc2e4ed8183bd9fbd6f7c5e235f48",o="";switch(e){case"movie_top":o="movie/popular?api_key=",t&&(o="search/movie?query="+t+"&api_key=");break;case"person_top":o="person/popular?api_key=",t&&(o="search/person?query="+t+"&api_key=");break;case"movie_detail":t&&(o="movie/"+t+"?append_to_response=credits&api_key=");break;case"person_detail":t&&(o="person/"+t+"?append_to_response=movie_credits&api_key=")}var n=a+o+i;if(console.log(n),o){$.ajax({type:"GET",url:n,async:!1,contentType:"application/json",dataType:"jsonp",success:function(t){console.dir(t),JSON.stringify(t),LoadDataOnFields(t,e)},error:function(e){console.log(e.message)}})}}function LoadDataOnFields(e,t){var a=[];switch(t){case"movie_top":$(e.results).each(function(e,t){var i,o='<a class="ajax-call" href="movie'+t.id+'"><i>No file</i></a>';t.poster_path&&(i='"http://image.tmdb.org/t/p/w500'+t.poster_path+'"',o='<a class="ajax-call" href="movie'+t.id+'"><img src='+i+"></a>"),a.push([o,t.title,t.release_date,t.vote_average,t.vote_count])}),a&&FillDataTable(a);break;case"person_top":$(e.results).each(function(e,t){var i,o='<a class="ajax-call" href="person'+t.id+'"><i>No file</i></a>';t.profile_path&&(i='"http://image.tmdb.org/t/p/w500'+t.profile_path+'"',o='<a class="ajax-call" href="person'+t.id+'"><img src='+i+"></a>"),a.push([o,t.id,t.name,t.popularity])}),a&&FillDataTable(a);break;case"movie_detail":var i='<img class="col-sm-12" src="http://vicsport.com.au/wp-content/themes/vicsport/img/no_image.jpg">';e.poster_path&&(i='<img class="col-sm-12" src="http://image.tmdb.org/t/p/w500'+e.poster_path+'">'),$("#poster_div").html(i),$("#movie_title").html("<h3><span>"+e.title+"</span></h3>"),$("#movie_name").val(e.title),$("#movie_date").val(e.release_date),$("#movie_vote_average").val(e.vote_average),$("#movie_vote_count").val(e.vote_count),$("#movie_overview").val(e.overview),$(e.credits.cast).each(function(e,t){var i,o='<a class="ajax-call" registerId="'+t.id+'" context="person_detail" href="person'+t.id+'"><i>No file</i></a>';t.profile_path&&(i='"http://image.tmdb.org/t/p/w500'+t.profile_path+'"',o='<a class="ajax-call" registerId="'+t.id+'" context="person_detail" href="person'+t.id+'"><img src='+i+"></a>"),a.push([o,t.id,t.name,t.character])}),a&&FillDataTable(a);break;case"person_detail":var i='<img class="col-sm-12" src="http://vicsport.com.au/wp-content/themes/vicsport/img/no_image.jpg">';e.profile_path&&(i='<img class="col-sm-12" src="http://image.tmdb.org/t/p/w500'+e.profile_path+'">'),$("#profile_pic_div").html(i),$("#person_title").html("<h3><span>"+e.name+"</span></h3>"),$("#person_name").val(e.name),$("#person_birthdate").val(e.birthday),$("#person_place_of_birth").val(e.place_of_birth),$("#person_popularity").val(e.popularity),$("#person_biography").val(e.biography),$(e.movie_credits.cast).each(function(e,t){var i,o='<a class="ajax-call" registerId="'+t.id+'" context="movie_detail" href="movie'+t.id+'"><i>No file</i></a>';t.poster_path&&(i='"http://image.tmdb.org/t/p/w500'+t.poster_path+'"',o='<a class="ajax-call" registerId="'+t.id+'" context="movie_detail" href="movie'+t.id+'"><img src='+i+"></a>"),a.push([o,t.title,t.release_date,t.character])}),a&&FillDataTable(a)}$(".ajax-call").on("click",function(e){e.preventDefault();{var t=$(this).attr("href");$(this).attr("context"),$(this).attr("registerId")}window.location.hash=t,LoadAjaxContent(t),LoadData(t)})}function LoadData(e){var t,a;"movie"==e?(t="movie_top",a=$("#movie_name").val()):e.includes("movie")?(t="movie_detail",a=e.replace(/\D/g,"")):"person"==e?(t="person_top",a=$("#actor_name").val()):e.includes("person")&&(t="person_detail",a=e.replace(/\D/g,"")),LoadApiData(t,a)}!function(e){e.fn.beautyTables=function(){var t=this,a=!1;this.on("keydown",function(i){var o=i.target,n=e(o).closest("tr"),s=e(o).closest("td");if("INPUT"==o.tagName.toUpperCase()){if(i.shiftKey===!0)switch(i.keyCode){case 37:s.prev().children("input[type=text]").focus();break;case 39:s.next().children("input[type=text]").focus();break;case 40:0==a&&n.next().find("td:eq("+s.index()+") input[type=text]").focus();break;case 38:0==a&&n.prev().find("td:eq("+s.index()+") input[type=text]").focus()}if(i.ctrlKey===!0)switch(i.keyCode){case 37:n.find("td:eq(1)").find("input[type=text]").focus();break;case 39:n.find("td:last-child").find("input[type=text]").focus();break;case 40:0==a&&t.find("tr:last-child td:eq("+s.index()+") input[type=text]").focus();break;case 38:0==a&&t.find("tr:eq(1) td:eq("+s.index()+") input[type=text]").focus()}(13==i.keyCode||9==i.keyCode)&&(i.preventDefault(),s.next().find("input[type=text]").focus()),0==a&&(34==i.keyCode&&(i.preventDefault(),t.find("tr:last-child td:last-child").find("input[type=text]").focus()),33==i.keyCode&&(i.preventDefault(),t.find("tr:eq(1) td:eq(1)").find("input[type=text]").focus()))}}),t.find("input[type=text]").each(function(){e(this).on("blur",function(a){var i=a.target,o=e(i).parents("td");1==t.find("input[name=string-fill]").prop("checked")&&o.nextAll().find("input[type=text]").each(function(){e(this).val(e(i).val())})})})}}(jQuery),function(e){e.fn.beautyHover=function(){var t=this;t.on("mouseover","td",function(){var t=e(this).index(),a=e(this).closest("table").find("tr");a.each(function(){e(this).find("td:eq("+t+")").addClass("beauty-hover")})}).on("mouseleave","td",function(){var t=e(this).index(),a=e(this).closest("table").find("tr");a.each(function(){e(this).find("td:eq("+t+")").removeClass("beauty-hover")})})}}(jQuery),$(document).ready(function(){$(".show-sidebar").on("click",function(){$("div#main").toggleClass("sidebar-show"),setTimeout(MessagesMenuWidth,250)});var e=location.hash.replace(/^#/,"");e.length<1&&(e="movie"),LoadAjaxContent(e),LoadData(e),$(".main-menu").on("click","a",function(e){var t=$(this).parents("li"),a=$(this).closest("li.dropdown"),i=$(".main-menu li").not(t);if(i.find("a").removeClass("active"),i.find("a").removeClass("active-parent"),$(this).hasClass("dropdown-toggle")||0==$(this).closest("li").find("ul").length){$(this).addClass("active-parent");var o=$(this).next();o.is(":visible")?(a.find("ul.dropdown-menu").slideUp("fast"),a.find("ul.dropdown-menu a").removeClass("active")):(i.find("ul.dropdown-menu").slideUp("fast"),o.slideDown("fast"))}else if(a.find("a.dropdown-toggle").hasClass("active-parent")){var n=$(this).closest("ul.dropdown-menu");n.find("li.dropdown").not($(this).closest("li")).find("ul.dropdown-menu").slideUp("fast")}if(0==$(this).hasClass("active")&&($(this).parents("ul.dropdown-menu").find("a").removeClass("active"),$(this).addClass("active")),$(this).hasClass("ajax-link")){e.preventDefault(),$(this).hasClass("add-full")?$("#content").addClass("full-content"):$("#content").removeClass("full-content");{var s=$(this).attr("href");$(this).attr("context")}window.location.hash=s,LoadAjaxContent(s),LoadData(s)}"#"==$(this).attr("href")&&e.preventDefault()});var t=window.innerHeight-49;$("#main").css("min-height",t).on("click",".expand-link",function(e){var t=$("body");e.preventDefault();var a=$(this).closest("div.box"),i=$(this).find("i");i.toggleClass("fa-expand").toggleClass("fa-compress"),a.toggleClass("expanded"),t.toggleClass("body-expanded");var o=0;t.hasClass("body-expanded")&&(o=100),setTimeout(function(){a.toggleClass("expanded-padding")},o),setTimeout(function(){a.resize(),a.find("[id^=map-]").resize()},o+50)}).on("click",".collapse-link",function(e){e.preventDefault();var t=$(this).closest("div.box"),a=$(this).find("i"),i=t.find("div.box-content");i.slideToggle("fast"),a.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),setTimeout(function(){t.resize(),t.find("[id^=map-]").resize()},50)}).on("click",".close-link",function(e){e.preventDefault();var t=$(this).closest("div.box");t.remove()}),$("body").on("click","a.close-link",function(e){e.preventDefault(),CloseModalBox()}),$("#top-panel").on("click","a",function(e){if($(this).hasClass("ajax-link")){e.preventDefault(),$(this).hasClass("add-full")?$("#content").addClass("full-content"):$("#content").removeClass("full-content");{var t=$(this).attr("href");$(this).attr("context")}window.location.hash=t,LoadAjaxContent(t),LoadData(t)}})});